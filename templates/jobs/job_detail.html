{% extends 'base.html' %}
{% block title %}{{ job.title }} - Job Portal{% endblock %}
{% block content %}
<div class="card">
    <div class="card-body">
        <h2>{{ job.title }}</h2>
        <p class="lead"><i class="fas fa-building"></i> {{ job.employer.employer_profile.company_name|default:"Company" }}</p>
        <p><i class="fas fa-map-marker-alt"></i> {{ job.location }} | <i class="fas fa-briefcase"></i> {{ job.get_job_type_display }} | <i class="fas fa-graduation-cap"></i> {{ job.get_experience_level_display }}</p>
        {% if job.salary_min and job.salary_max %}<p><i class="fas fa-money-bill"></i> ${{ job.salary_min }} - ${{ job.salary_max }}</p>{% endif %}
        <hr>
        <h4>Description</h4>
        <p>{{ job.description }}</p>
        <h4>Requirements</h4>
        <p>{{ job.requirements }}</p>
        {% if job.responsibilities %}<h4>Responsibilities</h4><p>{{ job.responsibilities }}</p>{% endif %}
        <hr>
        {% if user.is_authenticated %}
            {% if user.profile.role == 'seeker' %}
                {% if has_applied %}
                    <button class="btn btn-secondary" disabled>Already Applied</button>
                {% else %}
                    <a href="{% url 'jobs:apply_job' job.id %}" class="btn btn-success">Apply Now</a>
                {% endif %}
            {% elif user == job.employer %}
                <a href="{% url 'jobs:edit_job' job.id %}" class="btn btn-warning">Edit Job</a>
                <a href="{% url 'jobs:view_applicants' job.id %}" class="btn btn-info">View Applicants ({{ job.applications_count }})</a>
            {% endif %}
        {% else %}
            <a href="{% url 'accounts:login' %}" class="btn btn-primary">Login to Apply</a>
        {% endif %}
    </div>
</div>
{% endblock %}
